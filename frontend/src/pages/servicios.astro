---
import BaseLayout from '../layouts/BaseLayout.astro';
import { supabaseClient } from '../../lib/supabase/client';
import { getWhatsAppUrl } from '../../lib/whatsapp';

const WHATSAPP_SERVICIOS_URL = getWhatsAppUrl('servicios');

// Servicios con storytelling completo
const servicios = [
  {
    id: 'mantencion',
    title: 'Mantenciones Programadas',
    heroImage: '/servicios/MantencionProgramada.png',
    story: {
      intro: 'Tu moto es una m√°quina de precisi√≥n. Cada kil√≥metro recorrido, cada ruta completada, cada aventura vivida deja su huella. Las mantenciones programadas no son solo un checklist: son el ritual que mantiene viva la conexi√≥n entre t√∫ y tu moto.',
      importancia: 'Una mantenci√≥n preventiva a tiempo puede evitar reparaciones costosas y mantener tu moto funcionando como el primer d√≠a. No es solo cambiar aceite: es revisar cada sistema, detectar desgastes tempranos y asegurar que cada componente est√© en su punto √≥ptimo.',
      cuando: 'LOS SERVICIOS PREVENTIVOS SE REALIZAN ANTES DE CADA PASEO O SALIDA Y LUEGO AL LLEGAR. Y LOS SERVICIOS SE REALIZAN 1 VEZ AL A√ëO O AL CUMPLIR LOS KILOMETROS DE SU PAUTA PROPUESTA POR CADA FABRICANTE.'
    },
    incluye: [
      'Cambio de aceite y filtros (motor y transmisi√≥n)',
      'Revisi√≥n completa de frenos (pastillas, discos, l√≠quido)',
      'Ajuste y lubricaci√≥n de cadena',
      'Revisi√≥n de neum√°ticos (presi√≥n, desgaste, v√°lvulas)',
      'Limpieza profunda y lubricaci√≥n de puntos cr√≠ticos',
      'Revisi√≥n de luces, se√±alizaci√≥n y sistema el√©ctrico',
      'Revisi√≥n de suspensi√≥n y chasis',
      'Diagn√≥stico general con esc√°ner electr√≥nico'
    ],
    productosRelacionados: ['Aceites y Lubricantes', 'Filtros', 'Buj√≠as'],
    image: '/servicios/MantencionProgramada.png'
  },
  {
    id: 'suspension',
    title: 'Suspensi√≥n y Chasis',
    heroImage: '/servicios/banner-suspencionychasis.png',
    story: {
      intro: 'La suspensi√≥n es el puente entre tu moto y el camino. Cada bache, cada curva, cada salto: la suspensi√≥n lo absorbe todo. Cuando est√° bien ajustada, sientes la carretera sin sentirla. Cuando no, cada imperfecci√≥n se convierte en incomodidad.',
      importancia: 'Una suspensi√≥n mal mantenida no solo es inc√≥moda: es peligrosa. Las horquillas desgastadas, los amortiguadores sin servicio, la geometr√≠a desajustada afectan el manejo, la estabilidad y la seguridad. En ruta, en ciudad, en off-road: la suspensi√≥n es cr√≠tica.',
      cuando: 'Cada 20.000 km o si notas rebote excesivo, p√©rdida de control en curvas, fugas de aceite en horquillas o amortiguador, o si la moto se siente "blanda". Si haces off-road o usas la moto intensivamente, reduce estos intervalos significativamente.'
    },
    incluye: [
      'Servicio completo de horquillas (desarme, limpieza, cambio de aceite y sellos)',
      'Revisi√≥n y servicio de amortiguador trasero',
      'Ajuste de geometr√≠a y altura',
      'Alineaci√≥n de ruedas y balanceo',
      'Revisi√≥n de rodamientos (ruedas, direcci√≥n)',
      'Revisi√≥n de chasis y estructura',
      'Ajuste de precarga y compresi√≥n/rebote'
    ],
    productosRelacionados: ['Suspensi√≥n'],
    image: '/servicios/suspencionyChasis.png'
  },
  {
    id: 'frenos',
    title: 'Sistema de Frenos',
    heroImage: '/servicios/frenos.png',
    story: {
      intro: 'Los frenos son tu red de seguridad. En una emergencia, en una curva cerrada, en el tr√°fico: conf√≠as en ellos completamente. Un sistema de frenos en perfecto estado no es negociable: es esencial.',
      importancia: 'Un freno que chirr√≠a, que no responde como antes, que vibra: son se√±ales de que algo no est√° bien. Las pastillas desgastadas, el l√≠quido contaminado, los discos da√±ados no solo reducen la efectividad: comprometen tu seguridad. Los frenos son vida.',
      cuando: 'Si notas que el freno no responde como antes, si escuchas ruidos al frenar, si el pedal o la maneta se sienten "esponjosos", o si ves desgaste irregular en las pastillas. Tambi√©n cada 10.000 km para revisi√≥n preventiva, o cada 2 a√±os para cambio de l√≠quido.'
    },
    incluye: [
      'Cambio de pastillas de freno (delanteras y traseras)',
      'Purga completa del sistema de frenos',
      'Cambio de l√≠quido de frenos (DOT 4 o DOT 5.1)',
      'Revisi√≥n de discos (medici√≥n de grosor, rectificado si es necesario)',
      'Ajuste de freno de mano',
      'Revisi√≥n de mangueras y latiguillos',
      'Revisi√≥n de bomba de freno y calipers',
      'Limpieza y lubricaci√≥n de componentes'
    ],
    productosRelacionados: ['Frenos'],
    image: '/servicios/frenos.png'
  },
  {
    id: 'electrico',
    title: 'Sistema El√©ctrico',
    heroImage: '/servicios/sistema-electrico.png',
    story: {
      intro: 'La electricidad es la sangre invisible de tu moto. Sin ella, no hay arranque, no hay luces, no hay nada. Un sistema el√©ctrico bien mantenido es silencioso, confiable, invisible. Cuando falla, se nota inmediatamente.',
      importancia: 'Una bater√≠a d√©bil, un alternador que no carga, luces que parpadean: problemas el√©ctricos pueden dejarte varado en el peor momento. El diagn√≥stico el√©ctrico requiere herramientas especializadas y conocimiento profundo. No es algo que puedas dejar pasar.',
      cuando: 'Si la moto no arranca, si las luces se ven d√©biles, si la bater√≠a se descarga r√°pidamente, o si notas problemas intermitentes. Tambi√©n cada 2 a√±os para revisi√≥n preventiva de bater√≠a y sistema de carga, o antes de un viaje largo.'
    },
    incluye: [
      'Revisi√≥n y prueba de bater√≠a (voltaje, carga, estado)',
      'Reparaci√≥n y diagn√≥stico de alternador',
      'Instalaci√≥n de luces LED y mejoras de iluminaci√≥n',
      'Reparaci√≥n de sistema de arranque',
      'Diagn√≥stico completo de fallas el√©ctricas',
      'Instalaci√≥n de alarmas y sistemas de seguridad',
      'Revisi√≥n de fusibles, rel√©s y conexiones',
      'Instalaci√≥n de GPS y electr√≥nica adicional'
    ],
    productosRelacionados: ['El√©ctrico', 'Bater√≠as', 'Iluminaci√≥n'],
    image: '/servicios/sistema-electrico.png'
  },
  {
    id: 'neumaticos',
    title: 'Neum√°ticos y Ruedas',
    heroImage: '/servicios/cambio-neumaticos.png',
    story: {
      intro: 'Los neum√°ticos son el √∫nico punto de contacto entre tu moto y el asfalto. Todo pasa por ah√≠: la aceleraci√≥n, el frenado, las curvas. Un neum√°tico en mal estado no solo se desgasta: te pone en riesgo.',
      importancia: 'Un neum√°tico con poco dibujo, con presi√≥n incorrecta, con da√±os: es un accidente esperando a pasar. El montaje correcto, el balanceo preciso, la alineaci√≥n adecuada: todo esto afecta no solo el desgaste, sino tu seguridad y el manejo de la moto.',
      cuando: 'Si notas desgaste irregular, si tienes un pinchazo, si los neum√°ticos tienen m√°s de 5 a√±os (incluso con buen dibujo), o si planeas un viaje largo. Tambi√©n cada 10.000 km para revisi√≥n de presi√≥n, alineaci√≥n y balanceo.'
    },
    incluye: [
      'Montaje y desmontaje de neum√°ticos',
      'Balanceo de ruedas (est√°tico y din√°mico)',
      'Reparaci√≥n de pinchazos (parches profesionales)',
      'Cambio de v√°lvulas y c√°maras',
      'Revisi√≥n de presi√≥n y ajuste',
      'Alineaci√≥n de ruedas',
      'Revisi√≥n de llantas (grietas, da√±os)',
      'Asesor√≠a en selecci√≥n de neum√°ticos seg√∫n uso'
    ],
    productosRelacionados: ['Neum√°ticos y C√°maras'],
    image: '/servicios/cambio-neumaticos.png'
  },
  {
    id: 'accesorios',
    title: 'Instalaci√≥n de Accesorios',
    heroImage: '/servicios/instalacion-accesorios.png',
    story: {
      intro: 'Personalizar tu moto es hacerla tuya. Cada accesorio que instalas, cada mejora que agregas, cada detalle que ajustas: es parte de tu historia. Pero una instalaci√≥n mal hecha puede arruinar no solo el accesorio, sino tu moto.',
      importancia: 'Instalar accesorios no es solo atornillar: es entender la mec√°nica, la electricidad, la aerodin√°mica. Una maleta mal montada puede afectar el manejo. Una luz mal conectada puede da√±ar el sistema el√©ctrico. La instalaci√≥n profesional no es un lujo: es sentido com√∫n.',
      cuando: 'Cuando compres un accesorio nuevo, cuando quieras mejorar tu moto, cuando planees un viaje y necesites equipamiento adicional. Tambi√©n si notas que un accesorio instalado previamente no funciona correctamente o est√° causando problemas.'
    },
    incluye: [
      'Instalaci√≥n de maletas y portaequipajes (top case, side cases)',
      'Montaje de parabrisas y deflectores',
      'Instalaci√≥n de luces auxiliares (LED, faros adicionales)',
      'Instalaci√≥n de alarmas y sistemas antirrobo',
      'Montaje de GPS y sistemas de navegaci√≥n',
      'Instalaci√≥n de calentadores de pu√±os y accesorios de confort',
      'Montaje de protectores de motor y chasis',
      'Asesor√≠a personalizada seg√∫n tipo de uso'
    ],
    productosRelacionados: ['Accesorios'],
    image: '/servicios/instalacion-accesorios.png'
  }
];

// Cargar productos relacionados para cada servicio bas√°ndose en palabras clave
async function getProductosRelacionados(keywords: string[]) {
  try {
    // Buscar productos que contengan las palabras clave en nombre o descripci√≥n
    const { data, error } = await supabaseClient
      .from('products')
      .select('*')
      .eq('status', 'active')
      .limit(20);
    
    if (error || !data || data.length === 0) return [];
    
    // Filtrar productos que coincidan con las palabras clave
    const productosFiltrados = data.filter((producto: any) => {
      const nombre = (producto.name || '').toLowerCase();
      const descripcion = (producto.description || '').toLowerCase();
      const textoCompleto = `${nombre} ${descripcion}`;
      
      return keywords.some(keyword => 
        textoCompleto.includes(keyword.toLowerCase())
      );
    });
    
    // Si no hay coincidencias exactas, devolver productos aleatorios relevantes
    if (productosFiltrados.length === 0) {
      return data.slice(0, 4);
    }
    
    return productosFiltrados.slice(0, 4);
  } catch (err) {
    return [];
  }
}

// Mapeo de servicios a palabras clave para buscar productos relacionados
const keywordMap: Record<string, string[]> = {
  'mantencion': ['aceite', 'filtro', 'buj√≠a', 'lubricante', 'motorex', 'liqui'],
  'motor': ['motor', 'empaquetadura', 'v√°lvula', 'pist√≥n', 'aceite', 'buj√≠a'],
  'suspension': ['horquilla', 'amortiguador', 'suspensi√≥n', 'resorte', 'fork'],
  'frenos': ['freno', 'pastilla', 'disco', 'brake', 'l√≠quido'],
  'electrico': ['bater√≠a', 'relay', 'rele', 'regulador', 'led', 'ampolleta', 'buj√≠a'],
  'neumaticos': ['neum√°tico', 'tire', 'c√°mara', 'mousse', 'aro'],
  'accesorios': ['protector', 'espejo', 'maleta', 'portaequipaje', 'parabrisas', 'alarma'],
};

// Cargar productos para cada servicio
const serviciosConProductos = await Promise.all(
  servicios.map(async (servicio) => {
    const keywords = keywordMap[servicio.id] || [];
    const productos = await getProductosRelacionados(keywords);
    return { ...servicio, productos };
  })
);
---

<BaseLayout title="Servicios T√©cnicos - Mimoto" description="Servicio t√©cnico especializado para motos. Mantenciones, reparaciones y diagn√≥stico profesional.">
  <!-- Hero Editorial -->
  <section class="relative w-full min-h-[85vh] overflow-hidden">
    <div class="absolute inset-0">
      <div
        class="absolute inset-0 bg-cover bg-center"
        style="background-image: url('/bannerServicios.jpg');"
      ></div>
      <div class="absolute inset-0 bg-gradient-to-b from-ktm-bg/40 via-ktm-bg/30 to-ktm-bg/50"></div>
    </div>
    <div class="relative z-10 h-full flex items-center justify-center pt-32 md:pt-40">
      <div class="max-w-7xl mx-auto px-4 md:px-8 w-full text-center">
        <div class="max-w-4xl mx-auto">
          <h1 class="text-5xl md:text-7xl lg:text-8xl font-black mb-6 text-white leading-tight tracking-tight drop-shadow-lg">
            Servicio T√©cnico Especializado
          </h1>
          <p class="text-xl md:text-2xl lg:text-3xl text-white/95 mb-8 font-light leading-relaxed drop-shadow-md">
            Tu moto en manos de especialistas. Cada servicio es una historia de cuidado, precisi√≥n y pasi√≥n.
          </p>
          <div class="flex flex-wrap gap-4 justify-center">
            <a
              href={WHATSAPP_SERVICIOS_URL}
              class="inline-flex items-center gap-3 px-10 py-5 bg-ktm-accent text-black dark:text-white font-bold text-lg hover:bg-ktm-accent-600 transition-all uppercase tracking-wider shadow-lg"
            >
              Agendar Servicio
            </a>
            <a
              href="#servicios"
              class="inline-flex items-center gap-3 px-10 py-5 border-2 border-white text-white font-bold text-lg hover:bg-white hover:text-black dark:hover:text-ktm-bg transition-all uppercase tracking-wider"
            >
              Explorar Servicios
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Storytelling Section -->
  <section class="max-w-7xl mx-auto px-4 md:px-8 py-20">
    <div class="mb-16 text-center">
      <h2 class="text-4xl md:text-5xl font-black text-ktm-light-text dark:text-ktm-text mb-6 uppercase tracking-tight">
        ¬øQUE SERVICIOS REALIZAMOS?
      </h2>
      <p class="text-xl md:text-2xl text-ktm-light-text dark:text-ktm-text/80 leading-relaxed max-w-3xl mx-auto">
        REALIZAREMOS LOS SERVICIOS DE MANTENCION CON PAUTAS ENTREGADAS POR LA MARCA.
      </p>
    </div>
    <div class="grid md:grid-cols-2 gap-12 md:gap-16 items-center">
      <div>
        <h2 class="text-4xl md:text-5xl font-black text-ktm-light-text dark:text-ktm-text mb-6 uppercase tracking-tight">
          M√°s que un Taller
        </h2>
        <div class="space-y-4 text-lg text-ktm-light-text dark:text-ktm-text/80 leading-relaxed">
          <p>
            En Mimoto, entendemos que tu moto es m√°s que un veh√≠culo. Es tu compa√±era de aventuras, tu medio de transporte diario, tu pasi√≥n. Por eso, cada servicio que realizamos est√° respaldado por a√±os de experiencia y un compromiso inquebrantable con la calidad.
          </p>
          <p>
            Nuestro taller cuenta con t√©cnicos certificados especializados en todas las marcas principales: KTM, Honda, Yamaha, Suzuki, Kawasaki y m√°s. Trabajamos exclusivamente con repuestos originales y de las mejores marcas del mercado, garantizando que cada reparaci√≥n y mantenci√≥n dure.
          </p>
          <p>
            Desde una simple mantenci√≥n preventiva hasta una reconstrucci√≥n completa de motor, cada trabajo se realiza con precisi√≥n, cuidado y atenci√≥n al detalle. Tu seguridad y la de tu moto son nuestra prioridad.
          </p>
        </div>
      </div>
      <div class="relative">
        <div
          class="aspect-[4/3] bg-cover bg-center "
          style="background-image: url('/servicios/MotoryTransmision.png');"
        ></div>
        <div class="absolute -bottom-6 -right-6 bg-ktm-accent p-8 border-2 border-white">
          <div class="text-4xl font-black text-ktm-light-text dark:text-ktm-text mb-2">31</div>
          <div class="text-ktm-light-text dark:text-ktm-text/90 text-sm uppercase tracking-wider">A√±os de Experiencia</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Servicios con Storytelling Visual -->
  <section id="servicios" class="max-w-7xl mx-auto px-4 md:px-8 py-20">
    {serviciosConProductos.map((servicio, index) => (
      <div class={`mb-32 ${index > 0 ? 'pt-20 border-t-2 border-ktm-light-border dark:border-ktm-border' : ''}`}>
        <!-- Hero del Servicio -->
        <div class="relative w-full min-h-[60vh] mb-16 overflow-hidden">
          <div
            class="absolute inset-0 bg-cover bg-center"
            style={`background-image: url('${servicio.heroImage}');`}
          ></div>
          <div class="absolute inset-0 bg-gradient-to-b from-ktm-bg/40 via-ktm-bg/30 to-ktm-bg/50"></div>
          <div class="relative z-10 h-full flex items-center justify-center pt-24 md:pt-32">
            <div class="max-w-7xl mx-auto px-4 md:px-8 w-full">
              <div class="max-w-3xl">
                <h2 class="text-4xl md:text-6xl lg:text-7xl font-black mb-6 text-white leading-tight tracking-tight drop-shadow-lg">
                  {servicio.title}
                </h2>
                <p class="text-xl md:text-2xl text-white/95 mb-8 font-light leading-relaxed drop-shadow-md">
                  {servicio.story.intro}
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Contenido Editorial - Alternando Imagen/Texto -->
        <div class="space-y-16">
          <!-- Bloque 1: Importancia -->
          <div class={`grid md:grid-cols-2 gap-12 items-center ${index % 2 === 0 ? '' : 'md:flex-row-reverse'}`}>
            <div class={index % 2 === 0 ? '' : 'md:order-2'}>
              <h3 class="text-3xl md:text-4xl font-black text-ktm-light-text dark:text-ktm-text mb-6 uppercase tracking-tight">
                ¬øPor qu√© es importante?
              </h3>
              <p class="text-lg text-ktm-light-text dark:text-ktm-text/80 leading-relaxed">
                {servicio.story.importancia}
              </p>
            </div>
            <div class={`relative ${index % 2 === 0 ? '' : 'md:order-1'}`}>
              <div
                class="aspect-[4/3] bg-cover bg-center "
                style={`background-image: url('${servicio.image}');`}
              ></div>
            </div>
          </div>

          <!-- Bloque 2: Qu√© incluye -->
          <div class="bg-ktm-light-surface/60 dark:bg-ktm-surface/60 backdrop-blur-md rounded-xl p-8 md:p-12">
            <h3 class="text-3xl md:text-4xl font-black text-ktm-light-text dark:text-ktm-text mb-8 uppercase tracking-tight">
              ¬øQu√© incluye este servicio?
            </h3>
            <div class="grid md:grid-cols-2 gap-4">
              {servicio.incluye.map((item) => (
                <div class="flex items-start gap-3">
                  <span class="text-ktm-accent font-bold text-xl mt-1">‚Ä¢</span>
                  <span class="text-ktm-light-text dark:text-ktm-text/80 text-base leading-relaxed">{item}</span>
                </div>
              ))}
            </div>
          </div>

          <!-- Bloque 3: Cu√°ndo hacerlo -->
          <div class={`grid md:grid-cols-2 gap-12 items-center ${index % 2 === 1 ? '' : 'md:flex-row-reverse'}`}>
            <div class={index % 2 === 1 ? '' : 'md:order-2'}>
              <h3 class="text-3xl md:text-4xl font-black text-ktm-light-text dark:text-ktm-text mb-6 uppercase tracking-tight">
                ¬øCu√°ndo hacerlo?
              </h3>
              <p class="text-lg text-ktm-light-text dark:text-ktm-text/80 leading-relaxed">
                {servicio.story.cuando}
              </p>
            </div>
            <div class={`relative ${index % 2 === 1 ? '' : 'md:order-1'}`}>
              <div class="bg-ktm-accent p-8 md:p-12 border-2 border-white">
                <div class="text-5xl font-black text-ktm-light-text dark:text-ktm-text mb-4">üí°</div>
                <p class="text-ktm-light-text dark:text-ktm-text/90 text-lg leading-relaxed">
                  <strong class="text-ktm-light-text dark:text-ktm-text">Consejo profesional:</strong> No esperes a que algo falle. La prevenci√≥n siempre es m√°s econ√≥mica y segura que la reparaci√≥n.
                </p>
              </div>
            </div>
          </div>

          <!-- Productos Relacionados (si hay) -->
          {servicio.productos && servicio.productos.length > 0 && (
            <div class="bg-ktm-light-surface/60 dark:bg-ktm-surface/60 backdrop-blur-md rounded-xl p-8 md:p-12">
              <h3 class="text-2xl md:text-3xl font-black text-ktm-light-text dark:text-ktm-text mb-6 uppercase tracking-tight">
                Consultar disponibilidad
              </h3>
              <p class="text-ktm-light-text dark:text-ktm-text/70 mb-8 text-base">
                Repuestos y productos que utilizamos en este servicio. Consulta disponibilidad y precios.
              </p>
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                {servicio.productos.slice(0, 4).map((producto: any) => {
                  const imageUrl = producto.main_image_url || '';
                  const hasImage = imageUrl && imageUrl.trim() !== '';
                  const price = Number(producto.price) || 0;
                  return (
                    <a
                      href="/tienda"
                      class="bg-ktm-light-surface dark:bg-ktm-surface  p-4 group hover:border-ktm-accent transition-all"
                    >
                      {hasImage ? (
                        <div class="aspect-square mb-3 overflow-hidden bg-gray-800">
                          <img
                            src={imageUrl}
                            alt={producto.name}
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                            loading="lazy"
                            crossorigin="anonymous"
                            onerror="this.onerror=null; this.parentElement.innerHTML='<div class=\\'w-full h-full flex items-center justify-center text-ktm-light-text dark:text-ktm-text/40 text-xs\\'>Sin imagen</div>';"
                          />
                        </div>
                      ) : (
                        <div class="aspect-square mb-3 bg-gray-800 flex items-center justify-center text-ktm-light-text dark:text-ktm-text/40 text-xs">
                          Sin imagen
                        </div>
                      )}
                      <h4 class="text-sm font-black text-ktm-light-text dark:text-ktm-text mb-2 uppercase tracking-tight line-clamp-2">
                        {producto.name}
                      </h4>
                      <p class="text-ktm-light-text dark:text-ktm-text/60 text-xs italic">Consultar disponibilidad</p>
                    </a>
                  );
                })}
              </div>
              <div class="mt-6">
                <a
                  href="/tienda"
                  class="inline-flex items-center gap-2 text-ktm-accent font-bold uppercase tracking-wider text-sm hover:gap-4 transition-all"
                >
                  Consultar disponibilidad ‚Üí
                </a>
              </div>
            </div>
          )}

          <!-- CTA del Servicio -->
          <div class="bg-ktm-light-surface dark:bg-ktm-surface border border-ktm-accent/50 rounded-xl p-8 md:p-12 text-center">
            <h3 class="text-2xl md:text-3xl font-black text-ktm-light-text dark:text-ktm-text mb-4 uppercase tracking-tight">
              ¬øListo para agendar este servicio?
            </h3>
            <p class="text-ktm-light-text dark:text-ktm-text/80 mb-6 text-lg">
              Cont√°ctanos y coordina una evaluaci√≥n. Estamos aqu√≠ para ayudarte.
            </p>
            <div class="flex flex-wrap justify-center gap-4">
              <a
                href={WHATSAPP_SERVICIOS_URL}
                class="inline-flex items-center gap-3 px-8 py-4 bg-ktm-accent text-ktm-light-text dark:text-ktm-text font-bold hover:bg-ktm-accent-600 transition-all uppercase tracking-wider"
              >
                Agendar por WhatsApp
              </a>
              <a
                href="/tienda"
                class="inline-flex items-center gap-3 px-8 py-4 border border-ktm-accent/50 rounded-xl text-ktm-accent font-bold hover:bg-ktm-accent hover:text-ktm-light-text dark:text-ktm-text transition-all uppercase tracking-wider"
              >
                Ver Repuestos
              </a>
            </div>
          </div>
        </div>
      </div>
    ))}
  </section>

  <!-- Proceso Editorial -->
  <section class="max-w-7xl mx-auto px-4 md:px-8 py-20 bg-ktm-light-surface dark:bg-ktm-surface/30">
    <div class="mb-16 text-center">
      <h2 class="text-4xl md:text-5xl font-black text-ktm-light-text dark:text-ktm-text mb-4 uppercase tracking-tight">Nuestro Proceso</h2>
      <p class="text-xl text-ktm-light-text dark:text-ktm-text/70 max-w-2xl mx-auto">C√≥mo trabajamos para garantizar el mejor resultado</p>
    </div>

    <div class="grid md:grid-cols-4 gap-8">
      <div class="text-center">
        <div class="text-5xl font-black text-ktm-accent mb-4">01</div>
        <h3 class="text-xl font-black text-ktm-light-text dark:text-ktm-text mb-3 uppercase tracking-tight">Diagn√≥stico</h3>
        <p class="text-ktm-light-text dark:text-ktm-text/70 text-sm leading-relaxed">
          Evaluaci√≥n completa de tu moto con herramientas profesionales y diagn√≥stico electr√≥nico.
        </p>
      </div>
      <div class="text-center">
        <div class="text-5xl font-black text-ktm-accent mb-4">02</div>
        <h3 class="text-xl font-black text-ktm-light-text dark:text-ktm-text mb-3 uppercase tracking-tight">Cotizaci√≥n</h3>
        <p class="text-ktm-light-text dark:text-ktm-text/70 text-sm leading-relaxed">
          Presupuesto transparente y detallado antes de comenzar cualquier trabajo.
        </p>
      </div>
      <div class="text-center">
        <div class="text-5xl font-black text-ktm-accent mb-4">03</div>
        <h3 class="text-xl font-black text-ktm-light-text dark:text-ktm-text mb-3 uppercase tracking-tight">Reparaci√≥n</h3>
        <p class="text-ktm-light-text dark:text-ktm-text/70 text-sm leading-relaxed">
          Trabajo realizado por t√©cnicos certificados con repuestos originales y de calidad.
        </p>
      </div>
      <div class="text-center">
        <div class="text-5xl font-black text-ktm-accent mb-4">04</div>
        <h3 class="text-xl font-black text-ktm-light-text dark:text-ktm-text mb-3 uppercase tracking-tight">Garant√≠a</h3>
        <p class="text-ktm-light-text dark:text-ktm-text/70 text-sm leading-relaxed">
          Todos nuestros servicios incluyen garant√≠a. Tu tranquilidad es nuestra prioridad.
        </p>
      </div>
    </div>
  </section>

  <!-- CTA Final -->
  <section class="max-w-7xl mx-auto px-4 md:px-8 py-20">
    <div class="bg-ktm-light-surface dark:bg-ktm-surface border border-ktm-accent/50 rounded-xl p-12 md:p-16 text-center">
      <h2 class="text-3xl md:text-4xl font-black text-ktm-light-text dark:text-ktm-text mb-4 uppercase tracking-tight">¬øListo para comenzar?</h2>
      <p class="text-xl text-ktm-light-text dark:text-ktm-text/80 mb-8 max-w-2xl mx-auto">
        Agenda tu servicio t√©cnico o consulta por repuestos y accesorios
      </p>
      <div class="flex flex-wrap justify-center gap-4">
        <a
          href={PUBLIC_WHATSAPP_URL}
          class="inline-flex items-center gap-3 px-10 py-5 bg-ktm-accent text-ktm-light-text dark:text-ktm-text font-bold text-lg hover:bg-ktm-accent-600 transition-all uppercase tracking-wider"
        >
          Contactar por WhatsApp
        </a>
        <a
          href="/tienda"
          class="inline-flex items-center gap-3 px-10 py-5 border border-ktm-accent/50 rounded-xl text-ktm-accent font-bold text-lg hover:bg-ktm-accent hover:text-ktm-light-text dark:text-ktm-text transition-all uppercase tracking-wider"
        >
          Ver Repuestos
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
